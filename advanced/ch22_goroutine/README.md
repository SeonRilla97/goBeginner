# 고루틴 


### 스레드

싱글 태스킹 : 한번에 한 프로세스만 동작

멀티 태스킹 : 여러 프로세스를 동시에 동작

프로세스 : 메모리 공간에 로딩되어 동작하는 프로그램

싱글 스레드 : 프로세스가 사용하는 스레드가 하나

멀티 스레드 : 프로세스가 사용하는 스레드가 두개 이상


컨텍스트 스위칭 : CPU 코어가 여러 스레드를 전환 하면서 수행

스레드 컨텍스트 : 스레드 전환을 위해 명령 포인터, 스택 메모리 등의 정보를 보관


**보통 CPU 코어 개수의 2배 이상 스레드를 만들면 스위칭 비용이 발생한다**

##### Go의 스레드

=> CPU 코어와 OS 스레드는 할당받은 그대로 고정, 고루틴에 대한 스케줄링을 통해 컨텍스트 비용을 절감한다.



### 동시성 프로그램

동일 메모리 자원에 여러 고루틴이 접근하면 의도하지 않은 동작이 나온다

##### Mutex 이용

- 동시성으로 인한 성능 향상 불가 
- 데드락 주의 => 뮤텍스의 범위를 좁혀서 데드락을 계속 확인해야함
```go
데드락 회피 방안

1. 영역을 나눈다
    - 서로의 영역을 침범하지 않도록 한다.
2. 역할을 나눈다
    - 역할을 부여하여 각자 수행한다.
```
